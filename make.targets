# ------------------------------------------------------------------------------
# Folder paths
# ------------------------------------------------------------------------------

BUILD_ROOT_PATH := build

# ------------------------------------------------------------------------------
# Flags
# ------------------------------------------------------------------------------

MAKEFLAGS       += --no-print-directory

# ------------------------------------------------------------------------------
# Exports
# ------------------------------------------------------------------------------

export MKDIR
export RMDIR
export COPY
export BUILD_ROOT_PATH

# ------------------------------------------------------------------------------
# Reserved rules
# ------------------------------------------------------------------------------

.PHONY: all japan usa europe clean

# ------------------------------------------------------------------------------
# Compile for all regions
# ------------------------------------------------------------------------------

all:
	@$(MAKE) -f make.rules REGION=JAPAN REGION_FOLDER=japan
	@$(MAKE) -f make.rules REGION=USA REGION_FOLDER=usa
	@$(MAKE) -f make.rules REGION=EUROPE REGION_FOLDER=europe

# ------------------------------------------------------------------------------
# Compile for Japanese Sega CD
# ------------------------------------------------------------------------------

japan:
	@$(MAKE) -f make.rules REGION=japan REGION_FOLDER=japan

# ------------------------------------------------------------------------------
# Compile for American Sega CD
# ------------------------------------------------------------------------------

usa:
	@$(MAKE) -f make.rules REGION=USA REGION_FOLDER=usa

# ------------------------------------------------------------------------------
# Compile for European Sega CD
# ------------------------------------------------------------------------------

europe:
	@$(MAKE) -f make.rules REGION=EUROPE REGION_FOLDER=europe

# ------------------------------------------------------------------------------
# Clean
# ------------------------------------------------------------------------------

clean:
ifneq ($(wildcard $(BUILD_ROOT_PATH)/),)
	@$(RMDIR) "$(BUILD_ROOT_PATH)"
endif

# ------------------------------------------------------------------------------